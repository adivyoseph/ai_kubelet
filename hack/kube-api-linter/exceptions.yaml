# Exceptions for kube-api-linter.
# Exceptions are used for kube-api-linter to ignore existing issues that cannot be fixed without breaking changes.

# All four of these files contain a variant of {Ingress}PortStatus, which has an Error field marked as optional and kubebuilder:validation:Required.
# Any CRD embedding this type will prefer the kubebuilder:validation:Required marker, and will have the field marked as required in the generated schema.
# This means the behaviour of the field is inconsistent for core types vs CRDs, and should not be fixed.
# It also means the requiredfield linter complains about the fields being pointers, which they must be for the core types.
- path: "staging/src/k8s.io/api/core/v1/types.go|staging/src/k8s.io/api/extensions/v1beta1/types.go|staging/src/k8s.io/api/networking/v1beta1/types.go|staging/src/k8s.io/api/networking/v1/types.go"
  text: "field Error must not be marked as both optional and required"
- path: "staging/src/k8s.io/api/core/v1/types.go|staging/src/k8s.io/api/extensions/v1beta1/types.go|staging/src/k8s.io/api/networking/v1beta1/types.go|staging/src/k8s.io/api/networking/v1/types.go"
  text: "field Error is marked as required, but has the omitempty tag|field Error is marked as required, should not be a pointer"

# The ParentRef is marked required, but is a pointer and has omitempty.
# There is no validation checking the field is actually required (should it be optional?)
# but it is required per the openapi spec.
- path: "staging/src/k8s.io/api/networking/v1/types.go|staging/src/k8s.io/api/networking/v1beta1/types.go|staging/src/k8s.io/api/networking/v1alpha1/types.go"
  text: "field ParentRef is marked as required, but has the omitempty tag|field ParentRef is marked as required, should not be a pointer"
